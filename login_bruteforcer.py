import os
import requests as r
import re
from tkinter import messagebox

def bruteforce(user, password, url, user_payload, password_payload):
    print("\n\n\n")
    print("Testing login bruteforce")
    print("user:", user)
    print("password:", password)
    print("user payload:", user_payload)
    print("password payload:", password_payload)
    print("\n\n\n")

    url = url.strip()
    if not re.match("^http://", url) and not re.match("^https://", url):
        url = "http://" + url
    if r.post(url, data = {user_payload:"Test", password_payload:"Test"}).status_code != 200:
        messagebox.showerror(title="Payload Error", message="Response to POST is incorrect status code")
        return




    if os.path.exists(user) and os.path.exists(password):
        print("Both are files")
    if os.path.exists(user) and not os.path.exists(password):
        print("Enumerating Users")
    if os.path.exists(password) and not os.path.exists(user):
        print("Enumerating Passwords")
    else:
        print("1 pass, 1 user")    

    data = {user_payload:"Test", password_payload:"Test"}
    test_request = r.post(url, data=data)
    new_content = (test_request.text).split("\n")
    origial_content = (r.get(url).text).split("\n")


    for content in new_content:
        if content in origial_content:
            pass
        else:
            print(content)

 


    

